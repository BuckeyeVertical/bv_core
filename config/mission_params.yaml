# ============================================================
# MISSION PARAMETERS
# ============================================================

# (latitude, longitude, altitude).
#
# Altitude is relative to takeoff point (AGL - Above Ground Level)



# VISION PIPELINE CONFIGURATION

# Pipeline type: 'sim', 'real', or 'ros'
pipeline_type: 'sim'

# Gazebo simulation settings (used when pipeline_type: 'sim')
#change this if drone or world changes
gz_topic: '/world/baylands/model/x500_gimbal_0/link/camera_link/sensor/camera/image'

# Real camera settings (used when pipeline_type: 'real')
gst_pipeline: 'v4l2src device=/dev/video0 io-mode=2 do-timestamp=true ! video/x-raw,format=UYVY,width=1920,height=1080,framerate=30/1 ! videoconvert ! video/x-raw,format=BGR ! queue max-size-buffers=1 leaky=downstream ! appsink drop=true sync=false'
camera_fps: 30.0
record_video: false

# ROS topic subscription (ros) - for rosbag playback
ros_image_topic: '/image_compressed'

# MISSION CONFIGURATION

# Number of objects to detect and deliver payloads to
num_objects: 4

# Takeoff altitude used as anchor for all waypoints
takeoff_alt: &TAKEOFF 16.2



# LAP WAYPOINTS


points:
  - [38.3876112, -76.4190542, *TAKEOFF]
  # Add more lap waypoints as needed:
  # - [38.3862744, -76.4182914, *TAKEOFF]
  # - [38.3876112, -76.4190542, *TAKEOFF]



# SCAN WAYPOINTS

# Search pattern for object detection.
# Drone flies this pattern while vision system actively looks
# for targets. When an object is detected, the drone stops,
# localizes, and delivers before resuming from where it left off.

scan_points:
  - [38.3877010311175, -76.4190542, *TAKEOFF]
  - [38.3877010311175, -76.4189395943129, *TAKEOFF]
  - [38.3877010311175, -76.41882498862581, *TAKEOFF]
  - [38.3877010311175, -76.41871038293871, *TAKEOFF]
  - [38.3877010311175, -76.41859577725162, *TAKEOFF]
  - [38.3877010311175, -76.41848117156452, *TAKEOFF]
  - [38.3877010311175, -76.41836656587742, *TAKEOFF]






# VELOCITY PARAMETERS (m/s)

# Maximum horizontal velocities for each mission phase.
# Lower velocities improve detection accuracy but increase
# mission time.

Lap_velocity: 5.0       # Fast - reconnaissance only
Scan_velocity: 2.5      # Slow - need time for detection
Deliver_velocity: 5.0   # Fast - target already localized (stitching runs in background)



# WAYPOINT TOLERANCE PARAMETERS (meters)

# Acceptance radius for considering a waypoint "reached".
# Smaller values = more precise but may cause overshoot.
# Larger values = faster transitions but less precise.

Lap_tolerance: 2.0      # Loose - just need to cover area
Scan_tolerance: 1.0     # Medium - balance speed/accuracy
Deliver_tolerance: 1.0  # Tight - need accurate drop position



# SERVO PWM CONFIGURATION

# PWM values for payload release servos (microseconds).
# Each object uses a different servo channel (cycles 1-4).
#
# Sequence for each deploy:
#   1. Initial PWM (extend/release)
#   2. Second PWM (retract)
#   3. Default PWM (idle/neutral)
#
# Values are per-servo: [CH1, CH2, CH3, CH4]

Default_servo_pwms: [1500, 1500, 1500, 1500]    # Neutral position
Deliver_initial_pwms: [1600, 1600, 1600, 1600]  # Release position
Deliver_second_pwms: [1400, 1400, 1400, 1400]   # Retract position